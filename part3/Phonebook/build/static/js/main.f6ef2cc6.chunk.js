(this.webpackJsonpworkbook=this.webpackJsonpworkbook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(14),o=t.n(c),a=t(4),u=t(2),i=function(e){var n=e.persons,t=e.filter,c=e.handleDelete;return""!==t?n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(r.jsxs)("p",{children:[e.name," ",e.number]})})):n.map((function(e){return Object(r.jsxs)("p",{children:[e.name," ",e.number," ",Object(r.jsx)("button",{onClick:function(){return c(e.id)},children:"Delete"})]})}))},d=function(e){return Object(r.jsxs)("form",{onSubmit:e.submit,children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{value:e.name,onChange:e.textChange}),Object(r.jsx)("br",{}),"number: ",Object(r.jsx)("input",{value:e.number,onChange:e.numberChange})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},s=function(e){return Object(r.jsxs)("div",{children:["filter shown with ",Object(r.jsx)("input",{value:e.filter,onChange:e.handleFilterInput})]})},l=t(3),b=t.n(l),f="/api/persons",j=function(e){return b.a.post(f,e).then((function(e){return e.data}))},m=function(e){return b.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))},h=function(e,n){return b.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},O=(t(38),function(){var e=Object(u.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],o=Object(u.useState)(""),l=Object(a.a)(o,2),f=l[0],O=l[1],p=Object(u.useState)(""),v=Object(a.a)(p,2),x=v[0],w=v[1],g=Object(u.useState)(""),y=Object(a.a)(g,2),C=y[0],k=y[1],S=Object(u.useState)({}),D=Object(a.a)(S,2),I=D[0],N=D[1],_=function(){b.a.get("/api/persons").then((function(e){c(e.data)}))};Object(u.useEffect)(_,[]);return Object(r.jsxs)("div",{children:[function(e){return console.log(e),null===e?null:e.removed?Object(r.jsx)("p",{className:"removed",children:e.removed}):e.added?Object(r.jsx)("p",{className:"success",children:e.added}):e.already_removed?Object(r.jsx)("p",{className:"error",children:e.already_removed}):void 0}(I),Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(s,{filter:C,handleFilterInput:function(e){k(e.target.value)}}),Object(r.jsx)("h2",{children:"add a new"}),Object(r.jsx)(d,{name:f,number:x,numberChange:function(e){w(e.target.value)},textChange:function(e){O(e.target.value)},submit:function(e){e.preventDefault();var n=t.some((function(e){return e.name===f})),r={name:f,number:x};if(n){var o=t.find((function(e){return e.name===f}));if(window.confirm("".concat(f," is already added to phonebook, replace old number with new one?")))return h(o.id,r).then((function(e){return c(t.map((function(n){return n.id===o.id?e:n})))})).catch((function(e){N({already_removed:"Information of ".concat(o.name," has already been removed from server")}),_()})),O(""),void w("")}""!==f?(j(r).then((function(e){c(t.concat(e)),N({added:"Added ".concat(e.name)})})).catch((function(e){return alert(e)})),O(""),w("")):alert("Please enter your name!")}}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(i,{persons:t,filter:C,handleDelete:function(e){window.confirm("Do you sure want to delete?")&&m(e).then((function(){var n=t.find((function(n){return n.id===e}));N({removed:"Information of ".concat(n.name," is successfully removed")}),c(t.filter((function(e){return e.id!==n.id})))})).catch((function(e){return console.log(e)}))}})]})});o.a.render(Object(r.jsx)(O,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.f6ef2cc6.chunk.js.map